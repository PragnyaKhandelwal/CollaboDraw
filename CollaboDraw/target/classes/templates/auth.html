<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CollaboDraw - Auth</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --main-green: #20b97c;
      --main-blue: #50a8fc;
      --main-yellow: #f8e663;
      --main-bg: #fafdff;
      --card-bg: rgba(255, 255, 255, 0.55); /* more glassy */
      --whiteboard-border: 2px solid #b7fbe2;
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: linear-gradient(120deg, #fafdff 60%, #eafff6 100%);
      /* Add animated SVG background */
      position: relative;
    }
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      z-index: 0;
      background: radial-gradient(circle at 80% 20%, #b7fbe2 0%, transparent 60%),
                  radial-gradient(circle at 20% 80%, #50a8fc33 0%, transparent 70%),
                  radial-gradient(circle at 60% 60%, #f8e66344 0%, transparent 80%);
      opacity: 0.7;
      pointer-events: none;
      animation: bgMove 12s linear infinite alternate;
    }
    @keyframes bgMove {
      0% { background-position: 80% 20%, 20% 80%, 60% 60%; }
      100% { background-position: 70% 30%, 30% 70%, 65% 65%; }
    }
    .center-container {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: transparent;
      padding: 2vw;
    }
    .auth-card {
      display: flex;
      flex-direction: row;
      align-items: stretch;
      background: var(--card-bg);
      backdrop-filter: blur(22px) saturate(1.4);
      border-radius: 32px;
      box-shadow: 0 8px 48px 8px rgba(32, 185, 124, 0.13);
      border: var(--whiteboard-border);
      overflow: hidden;
      animation: cardIn 0.8s cubic-bezier(.68,-0.55,.27,1.55);
      max-width: 900px;
      width: 100%;
    }
    @keyframes cardIn {
      from { opacity: 0; transform: translateY(60px) scale(0.97);}
      to { opacity: 1; transform: translateY(0) scale(1);}
    }
    .logo-panel {
      background: linear-gradient(120deg, #eafff6 60%, #fafdff 100%);
      flex: 1.1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 48px 32px 28px 32px;
      min-width: 260px;
      position: relative;
      z-index: 1;
      box-shadow: 12px 0 32px -16px #baffde33;
    }
    .logo-image {
      width: 240px;
      max-width: 98vw;
      margin-bottom: 0;
      margin-top: 0;
      border-radius: 22px;
      box-shadow: 0 8px 44px 0 #20b97c33;
      animation: floatLogo 3.5s ease-in-out infinite alternate;
      transition: transform 0.3s, box-shadow 0.3s;
      cursor: pointer;
    }
    @keyframes floatLogo {
      from { transform: translateY(0) scale(1);}
      to { transform: translateY(-18px) scale(1.06);}
    }
    .logo-image:hover {
      transform: scale(1.12) rotate(-3deg);
      box-shadow: 0 12px 48px 0 #20b97c44;
      filter: drop-shadow(0 0 18px #20b97c77);
    }
    .logo-title {
      font-family: 'Montserrat', 'Segoe UI', sans-serif;
      color: var(--main-green);
      font-size: 2.8rem;
      font-weight: 700;
      letter-spacing: 2px;
      text-shadow: 0 2px 18px #baffde77;
      margin-bottom: 0.5rem;
      user-select: none;
      transition: color 0.2s;
      margin-top: 18px;
    }
    /* Remove .logo-tagline or repurpose */
    .glass-form {
      flex: 1.2;
      min-width: 320px;
      width: 100%;
      background: rgba(255,255,255,0.92);
      border-radius: 0 32px 32px 0;
      box-shadow: 0 6px 36px 8px rgba(32, 185, 124, 0.13);
      padding: 54px 38px 38px;
      border-left: var(--whiteboard-border);
      display: flex;
      flex-direction: column;
      align-items: stretch;
      backdrop-filter: blur(13px);
      font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
      transition: box-shadow 0.3s ease;
      position: relative;
      z-index: 2;
    }
    .glass-form:hover {
      box-shadow: 0 10px 44px 14px rgba(32, 185, 124, 0.23);
    }
    .glass-form h1 {
      margin-top: 0;
      margin-bottom: 13px;
      font-size: 2rem;
      font-weight: 700;
      color: #0a6152;
      letter-spacing: 1px;
      font-family: 'Montserrat', 'Inter', sans-serif;
      text-align: center;
    }
    .tabs {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-bottom: 20px;
      margin-top: -4px;
    }
    .tab-btn {
      background: none;
      border: none;
      color: #8ab35a;
      font-size: 1.1rem;
      font-weight: 600;
      letter-spacing: 0.6px;
      cursor: pointer;
      padding: 6px 4px 8px;
      border-bottom: 2px solid transparent;
      transition: color 0.18s, border 0.19s, background 0.2s;
      border-radius: 6px 6px 0 0;
    }
    .tab-btn.active,
    .tab-btn:focus {
      color: var(--main-green);
      border-color: var(--main-green);
      outline: none;
      background: #eafff6;
    }
    .tab-btn:hover {
      background: #f8e66333;
      color: var(--main-blue);
    }
    .input-field {
      margin-bottom: 17px;
    }
    label {
      font-size: 1rem;
      font-weight: 500;
      color: #14865b;
      margin-bottom: 3px;
      display: block;
      letter-spacing: 0.2px;
      user-select: none;
    }
    input {
      width: 100%;
      padding: 12px;
      border-radius: 7px;
      border: 1.5px solid #b7fbe2;
      font-size: 1rem;
      background: #fff;
      color: #066446;
      transition: border-color 0.22s, box-shadow 0.21s, transform 0.2s ease;
      box-shadow: 0 0 2px #7cecb9;
      outline: none;
    }
    input:hover,
    input:focus {
      border-color: var(--main-green);
      box-shadow: 0 0 8px 2px #94e3ca;
      transform: scale(1.03);
    }
    .form-btn {
      background: linear-gradient(90deg, #36d6a1 65%, #9ef2ff 110%);
      color: #053133;
      font-weight: 700;
      font-size: 1.1rem;
      border: none;
      padding: 12px;
      border-radius: 7px;
      cursor: pointer;
      margin-top: 12px;
      margin-bottom: 5px;
      transition: background 0.18s, transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 1px 8px #7eefd926;
    }
    .form-btn:hover,
    .form-btn:focus {
      background: linear-gradient(90deg, #15774e 65%, #36e19d 110%);
      color: #fff;
      transform: scale(1.05) translateY(-2px);
      box-shadow: 0 6px 24px #20b97c33;
    }
    .social-row {
      display: flex;
      gap: 13px;
      justify-content: center;
      margin: 18px 0 10px;
    }
    .social-btn {
      background: #eafff6;
      border-radius: 7px;
      padding: 10px 13px;
      font-size: 1.16rem;
      cursor: pointer;
      border: none;
      box-shadow: 0 1px 6px #b8fffa45;
      display: flex;
      align-items: center;
      min-width: 36px;
      transition: background 0.18s, transform 0.2s, box-shadow 0.2s;
      color: #2ae8b5;
      justify-content: center;
    }
    .social-btn:hover,
    .social-btn:focus {
      background: #c1fbff;
      transform: scale(1.13) rotate(-6deg);
      box-shadow: 0 4px 18px #20b97c33;
    }
    .social-btn svg {
      width: 20px;
      height: 20px;
      margin-right: 0;
      display: block;
    }
    .alt-link {
      margin-top: 6px;
      color: #409d7f;
      font-size: 1rem;
      text-align: center;
      user-select: none;
    }
    .alt-link a {
      color: #1ad185;
      text-decoration: underline;
      font-weight: 700;
      cursor: pointer;
    }
    .forgot-link {
      text-align: right;
      font-size: 0.98rem;
      color: #34bb80;
      text-decoration: underline;
      cursor: pointer;
      margin-bottom: 8px;
      user-select: none;
      transition: color 0.15s;
    }
    .forgot-link:hover {
      color: var(--main-green);
    }
    /* Responsive */
    @media (max-width: 900px) {
      .auth-card {
        flex-direction: column;
        border-radius: 24px;
        max-width: 98vw;
      }
      .logo-panel {
        border-radius: 24px 24px 0 0;
        box-shadow: none;
        padding: 36px 18px 18px 18px;
      }
      .glass-form {
        border-radius: 0 0 24px 24px;
        border-left: none;
        border-top: var(--whiteboard-border);
        padding: 38px 18px 18px 18px;
      }
    }
    @media (max-width: 600px) {
      .logo-image {
        width: 90px;
      }
      .logo-title {
        font-size: 1.4rem;
      }
      .logo-tagline {
        font-size: 0.9rem;
      }
      .auth-card {
        border-radius: 12px;
      }
      .logo-panel, .glass-form {
        border-radius: 0;
        padding: 18px 6vw;
      }
    }
  </style>
</head>
<body>
  <div class="center-container">
    <div class="auth-card">
      <!-- Logo Panel -->
      <div class="logo-panel" aria-label="CollabDraw brand logo">
        <img src="/images/Preview.png" th:src="@{/images/Preview.png}" alt="CollabDraw Logo" class="logo-image" />
        <div class="logo-title">CollaboDraw</div>
        <!-- Removed tagline for cleaner look -->
      </div>
      <!-- Auth glass card -->
      <div class="glass-form" aria-live="polite">
        <div class="tabs" role="tablist" aria-label="Switch between login and sign up forms">
          <button class="tab-btn active" id="tab-login" role="tab" aria-selected="true" aria-controls="login-form" tabindex="0">Login</button>
          <button class="tab-btn" id="tab-signup" role="tab" aria-selected="false" aria-controls="signup-form" tabindex="-1">Sign Up</button>
        </div>
        <!-- Login form -->
        <form id="login-form" method="post" action="/auth/login" autocomplete="on" role="tabpanel" aria-labelledby="tab-login">
          <div class="input-field">
            <label for="username">Email</label>
            <input type="email" id="username" name="username" placeholder="username@gmail.com" autocomplete="username" required />
          </div>
          <div class="input-field">
            <label for="password">Password</label>
            <input type="password" id="password" name="password" placeholder="Password" autocomplete="current-password" required />
          </div>
          <div class="forgot-link" tabindex="0" role="link">Forgot Password?</div>
          <button type="submit" class="form-btn">Sign in</button>
          <div class="social-row">
            <a href="/oauth2/authorization/google" class="social-btn" aria-label="Google login">
              <!-- Google SVG -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="20" height="20" focusable="false" aria-hidden="true">
                <path fill="#fbc02d"
                  d="M43.611 20.083h-1.429v-.021h-18.712v7.851h11.076c-1.425 3.697-5.727 7.529-11.076 7.529-6.714 0-12.167-5.458-12.167-12.168s5.453-12.168 12.167-12.168c3.395 0 6.565 1.29 8.957 3.4l5.987-5.986C32.732 6.333 27.815 4.616 22.899 4.616 11.49 4.616 2.6 13.506 2.6 24.916c0 11.41 8.89 20.3 20.299 20.3 11.411 0 20.3-8.89 20.3-20.3 0-1.373-.153-2.71-.429-3.833z" />
              </svg>
            </a>
            <button type="button" class="social-btn" aria-label="LinkedIn login">
              <!-- LinkedIn SVG -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="20" height="20" fill="#0077B5" focusable="false" aria-hidden="true">
                <path
                  d="M100.28 448H7.4V148.9h92.88zm-46.46-348a53.76 53.76 0 11.07-107.52 53.76 53.76 0 01-.07 107.52zm394.6 348h-92.68V302.4c0-34.7-12.47-58.3-43.65-58.3-23.8 0-38 16-44.3 31.4-2.27 5.5-2.83 13.2-2.83 21v151.2h-92.68s1.22-245.3 0-270.8h92.68v38.4c12.32-19 34.3-46 83.36-46 60.9 0 106.64 39.8 106.64 125.5z" />
              </svg>
            </button>
            <button type="button" class="social-btn" aria-label="GitHub login">
              <!-- GitHub SVG -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="#333" focusable="false"
                aria-hidden="true">
                <path
                  d="M12 0a12 12 0 00-3.79 23.41c.6.11.82-.26.82-.58v-2.17c-3.34.73-4.04-1.61-4.04-1.61a3.18 3.18 0 00-1.33-1.75c-1.09-.74.09-.73.09-.73a2.51 2.51 0 011.83 1.23 2.55 2.55 0 003.48 1 2.54 2.54 0 01.76-1.6c-2.67-.31-5.47-1.33-5.47-5.92a4.63 4.63 0 011.23-3.22 4.3 4.3 0 01.12-3.18s1-.32 3.28 1.22a11.4 11.4 0 015.98 0c2.28-1.54 3.28-1.22 3.28-1.22a4.3 4.3 0 01.12 3.18 4.63 4.63 0 011.23 3.22c0 4.6-2.79 5.6-5.47 5.91a2.85 2.85 0 01.82 2.21v3.27c0 .32.21.7.83.58A12 12 0 0012 0z" />
              </svg>
            </button>
          </div>
          <div class="alt-link">Don't have an account? <a id="show-signup">Register</a></div>
        </form>
        <!-- Signup form -->
        <form id="signup-form" style="display:none;" autocomplete="on"
          role="tabpanel" aria-labelledby="tab-signup">
          <div class="input-field">
            <label for="signup-name">Full Name</label>
            <input type="text" id="signup-name" placeholder="Your full name" autocomplete="name" required />
          </div>
          <div class="input-field">
            <label for="signup-email">Email</label>
            <input type="email" id="signup-email" placeholder="username@gmail.com" autocomplete="email" required />
          </div>
          <div class="input-field">
            <label for="signup-password">Create Password</label>
            <input type="password" id="signup-password" placeholder="Choose a password" autocomplete="new-password"
              required />
          </div>
          <button type="submit" class="form-btn">Register</button>
          <div class="alt-link">Already have an account? <a id="show-login">Login</a></div>
        </form>
      </div>
    </div>
  </div>
  <script>
    // Auth toggle
    const tabLogin = document.getElementById('tab-login');
    const tabSignup = document.getElementById('tab-signup');
    const loginForm = document.getElementById('login-form');
    const signupForm = document.getElementById('signup-form');
    const showSignup = document.getElementById('show-signup');
    const showLogin = document.getElementById('show-login');
    function showTab(tab) {
      if (tab === 'login') {
        tabLogin.classList.add('active');
        tabSignup.classList.remove('active');
        loginForm.style.display = '';
        signupForm.style.display = 'none';
        tabLogin.setAttribute('aria-selected', 'true');
        tabSignup.setAttribute('aria-selected', 'false');
        tabLogin.setAttribute('tabindex', '0');
        tabSignup.setAttribute('tabindex', '-1');
      } else {
        tabSignup.classList.add('active');
        tabLogin.classList.remove('active');
        loginForm.style.display = 'none';
        signupForm.style.display = '';
        tabSignup.setAttribute('aria-selected', 'true');
        tabLogin.setAttribute('aria-selected', 'false');
        tabSignup.setAttribute('tabindex', '0');
        tabLogin.setAttribute('tabindex', '-1');
      }
    }
    tabLogin.onclick = () => showTab('login');
    tabSignup.onclick = () => showTab('signup');
    showSignup && (showSignup.onclick = (e) => {
      e.preventDefault();
      showTab('signup');
    });
    showLogin && (showLogin.onclick = (e) => {
      e.preventDefault();
      showTab('login');
    });
  </script>
  <script src="/auth.js"></script>
</body>
</html>
